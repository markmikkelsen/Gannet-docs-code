<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Release notes</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>






<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Gannet</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Documentation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="getting-started.html">Getting started</a>
    </li>
    <li>
      <a href="reference.html">Reference</a>
    </li>
    <li>
      <a href="output-struc-attrib.html">Output structure attributes</a>
    </li>
    <li>
      <a href="tissue-correction.html">Tissue correction</a>
    </li>
    <li>
      <a href="additional-tools.html">Additional tools</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="batch-script.html">Batch processing script</a>
    </li>
    <li>
      <a href="gannetpreinitialise-settings.html">GannetPreInitialise settings</a>
    </li>
  </ul>
</li>
<li>
  <a href="faq.html">FAQ</a>
</li>
<li>
  <a href="release-notes.html">Release notes</a>
</li>
<li>
  <a href="https://www.gabamrs.com/">Blog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/markmikkelsen/Gannet/issues">Report an issue</a>
</li>
<li>
  <a href="https://github.com/markmikkelsen/Gannet">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://www.gabamrs.com/contact">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Release notes</h1>
<h4 class="date">Last updated: January 19, 2022</h4>

</div>


<button onclick="topFunction()" id="myBtn" title="Go to top">
Back to top
</button>
<script>
//Get the button
var mybutton = document.getElementById("myBtn");

// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>
<p><br></p>
<p>This page logs the stable releases of Gannet. However, minor edits and bug fixes are also made in between releases. For a more comprehensive list of changes, see the commits logged on the <a href="https://github.com/markmikkelsen/Gannet/commits/main" target="_blank">repository</a> on GitHub.</p>
<div id="section" class="section level2">
<h2>3.2.0</h2>
<p><span style="color: grey;">2021-07-30</span></p>
<div id="new-features" class="section level3">
<h3>New features</h3>
<ul>
<li>Added <code>GannetVersion.m</code>, <code>VersionCheck.m</code>, and <code>UpdateGannet.m</code>; these new functions let users know the version of Gannet they have, if a newer release of Gannet is available, and will allow them to automatically update if wanted</li>
<li>Added <code>ToolboxCheck.m</code> to check for missing MATLAB toolboxes needed to run Gannet</li>
<li>Error dialog boxes are displayed at the end of the analysis pipeline if an error occurred (during a batch analysis, Gannet will skip to the next dataset and continue running)</li>
<li>Users can now choose to use weighted (the default) or conventional signal averaging in <code>GannetPreInitialise.m</code> (outlier scans are removed when using conventional averaging, as before)</li>
<li>Added a new (optional) method for robust, weighted signal averaging: weighted averaging by criterion function minimization (WACFM) using the generalized Cauchy distribution as the cost function; see doi: <a href="https://dx.doi.org/10.1016/j.bbe.2015.06.002" target="_blank">10.1016/j.bbe.2015.06.002</a> for more details; additionally, instead of weighting difference pairs, the subspectra of each editing subexperiment are weighted to generate weighted subspectra, which are then subtracted; see <code>SignalAveraging.m</code></li>
<li>Yair Altman’s <a href="https://github.com/altmany/export_fig" target="_blank">export_fig toolbox</a> is included as an optional toolbox that, if added to MATLAB’s search path, Gannet will use to append all output PDFs from each module into a single PDF (a flag must be set in <code>GannetPreInitialise.m</code> to do this); this is very useful for easy QA of lots of data; note that <a href="https://www.ghostscript.com/" target="_blank">Ghostscript</a> needs to be installed for the appending of PDFs to work (NB: macOS users should use this <a href="https://pages.uoregon.edu/koch/" target="_blank">version</a> or use <a href="https://formulae.brew.sh/formula/ghostscript" target="_blank">Homebrew</a> to install Ghostscript)</li>
<li>Implemented use of hyperlinks in info and error messages printed in the command window so that users can: (1) directly run a certain function (such as <code>UpdateGannet.m</code> when <code>VersionCheck.m</code> informs the user a new release is available); (2) go straight to the line of code where an encountered error can be fixed (such as errors in <code>GannetPreInitialise.m</code>); or (3) go to a website by clicking on the printed URL (such as to download SPM12); the relevant code has been borrowed from export_fig</li>
<li>Added an option in <code>GannetPreInitialise.m</code> that allows users, when using robust spectral registration, to use the averaged pre-aligned subspectra as references for aligning the averaged post-aligned subspectra (this may be helpful when robust spectral registration makes the alignment of already good-quality pre-aligned spectra worse)</li>
<li><code>PaperPlot.m</code> now allows users to plot an exemplary voxel mask co-registered to the respective structural image</li>
<li>Added <code>GannetMask_GE_nii.m</code>; GE users can now use NIfTI images instead of DICOMs to co-register their MRS voxels to structural images</li>
<li>Added the ability to trim datasets</li>
<li>Extended the ability to concatenate files, including over multiple subjects</li>
<li>Added a flag in <code>GannetPreInitialise.m</code> (<code>MRS_struct.p.hide</code>) to prevent output figures from displaying (useful when processing a large batch of files)</li>
</ul>
</div>
<div id="major-changes" class="section level3">
<h3>Major changes</h3>
<ul>
<li>The outdated manual PDF has been removed; up-to-date software documentation will now be found online: <a href="https://markmikkelsen.github.io/Gannet-docs/index.html" class="uri">https://markmikkelsen.github.io/Gannet-docs/index.html</a></li>
<li>Gannet is now licensed under the BSD 3-Clause License</li>
<li>Alpha tissue correction is now performed on a by-metabolite basis rather than fixing the intrinsic WM:GM concentration to 1:2 (alpha) for all metabolites (assuming for now the ratio is 1:2 for GABA and Glx and 1:1 for GSH, EtOH and Lac); the alpha that is assumed is displayed in the GannetQuantify output figure</li>
<li>Removed <code>MRS_struct.p.ON_OFF_order</code> from <code>GannetPreInitialise.m</code>; the order of editing pulses is now determined automatically; the relevant code has been borrowed from Osprey (this has only been tested to a limited extent so may require further tweaking)</li>
<li>The exception to this change is phantom data, where users will still need to specify the order of editing pulses</li>
</ul>
</div>
<div id="minor-changes" class="section level3">
<h3>Minor changes</h3>
<ul>
<li>Datasets with differing number of averages can now be batch-processed together</li>
<li>Turned off the progress bar displayed when loading Siemens TWIX data to reduce loading time</li>
<li>Renamed some files for the sake of clarity and style; removed obsolete <code>GannetMask.m</code></li>
<li>Signal averaging and subtraction are now done in the new function <code>SignalAveraging.m</code></li>
<li>Various improvements to <code>RobustSpectralRegistration.m</code> (formerly <code>Robust_Spectral_Registration.m</code>) for better handling of data acquired using very strong water suppression</li>
<li>The assumed concentration of pure water in <code>GannetFit.m</code> and <code>GannetFitPhantom.m</code> (PureWaterConc) has been changed from 55 to 55.51 mol/kg; this puts it in line with the same constant used in <code>GannetQuantify.m</code></li>
<li>Added edits from Ralph Noeske (GE Berlin) to <code>GERead.m</code> for better handling of data when nechoes == 1; also changed the scaling factor if nechoes &gt; 1 (hopefully this makes water-referenced measurements consistent across all data encoding flavors)</li>
<li>In <code>GERead.m</code> and <code>PhilipsRead_data.m</code>, instead of using the first point in the FID for signal weighting, the most common point that is the max in the magnitude signal across all FIDs is now used</li>
<li>Some changes to <code>SiemensDICOMRead.m</code> and <code>DICOMRead.m</code> for smarter handling of data files: for each dataset, metabolite and water data files should be stored in separate folders</li>
<li>Improved <code>ExportToCSV.m</code>; a single .csv file is now exported for HERMES datasets; useful variables such as signal areas and Cr fit quality metrics are now also exported</li>
<li>Rewrote <code>DiscernDataType.m</code> (formerly <code>GannetDiscernDatatype.m</code>)</li>
<li>Minor changes and improvements to <code>PaperPlot.m</code></li>
<li>Minor changes to <code>CoRegStandAlone.m</code> functions</li>
<li>Minor changes to <code>SignalFilter.m</code></li>
<li>Simplified <code>EddyCurrentCorrection.m</code> (formerly <code>phase_correction_fids.m</code>)</li>
<li>Set up SPM12 for batch tissue segmentation only when tissue segmentation has not already been run and do it only once in a batch</li>
<li>AllFramesFT (for the last loaded dataset) is now also saved in <code>MRS_struct.spec</code></li>
<li>When saving the <code>MRS_struct</code> structure, the .mat file is now saved using version 7.3 (for the rare case when the structure is &gt;= 2 GB on 64-bit computers)</li>
<li>Removed <code>MRS_struct.p.sdat</code> from <code>GannetPreInitialise.m</code> and the corresponding code from <code>GannetLoad.m</code> (this feature was never really used by users afaik)</li>
<li>Improved global zero-order phasing in <code>SpectralRegistrationHERMES.m</code></li>
<li>Many cosmetic/aesthetic changes
<ul>
<li>The module output figures now show information useful for reporting acquisition parameters and results (in line with the <a href="https://onlinelibrary.wiley.com/doi/10.1002/nbm.4484" target="_blank">MRSinMRS</a> checklist)</li>
<li>Co-registered/segmented voxel masks displayed in GannetCoRegister, GannetSegment, and GannetQuantify output figures are now shown in yellow rather than grayscale</li>
<li>Smarter stacking of HERMES difference spectra in <code>PlotPrePostAlign.m</code> and <code>PlotPrePostAlign2.m</code> (formerly <code>GannetPlotPrePostAlign.m</code> and <code>GannetPlotPrePostAlign2.m</code>)</li>
<li>The Gannet documentation website URL is printed at the bottom of every output figure</li>
<li>Removed irrelevant messages from being printed in the command window during the analysis pipeline, replacing them with more useful messages</li>
<li>Minor rearranging of results text in GannetSegment and GannetQuantify output figures</li>
<li>Slight change to the y-axis labels of the Cr frequency spectrogram in the GannetLoad output figure</li>
<li>Better reordering of <code>MRS_struct.out</code> subfields created in <code>GannetFit.m</code></li>
</ul></li>
</ul>
</div>
<div id="bug-fixes" class="section level3">
<h3>Bug fixes</h3>
<ul>
<li>Frequency and phase offset estimates are now tracked correctly and saved when running any of the spectral registration-based alignment methods</li>
<li>Removed old debugging conditional statement in <code>TWIXDeIdentify.m</code></li>
<li>Explicitly specify color of water frequency trace in GannetLoad output figure as there appears to be a bug since MATLAB R2019b when using hold to overlay plots</li>
<li>Added EtOH signal parameters to <code>GannetQuantify.m</code></li>
<li>In <code>SiemensTwixRead.m</code>, if no water reference is provided, use the most common point that is the max in the magnitude signal across all FIDs instead of just using the first point</li>
<li>Fixed an orientation problem in <code>GannetMask_GE.m</code></li>
<li>Removed unnecessary complex conjugate transpose during FFT of water data in <code>GannetLoad.m</code></li>
<li>Turned off warnings about legacy number generator in <code>RobustSpectralRegistration.m</code> (for when rng and randn are run in <code>SignalFilter.m</code>) if they are already turned on</li>
</ul>
<p><br></p>
</div>
</div>
<div id="section-1" class="section level2">
<h2>3.1.5</h2>
<p><span style="color: grey;">2020-03-02</span></p>
<div id="new-features-1" class="section level3">
<h3>New features</h3>
<ul>
<li>Smarter checking of incorrect settings in <code>GannetPreInitialise.m</code> by <code>CheckTargets.m</code></li>
<li>Major changes to <code>GannetFitPhantom.m</code> to bring it more in line with <code>GannetFit.m</code></li>
<li>Added support for CMRR MEGA-sLASER sequence in <code>SiemensTwixRead.m</code></li>
<li>In <code>SubSpectralAlign.m</code>, if very strong water suppression was used, use Cho instead of residual water to align subspectra of GABA-, Lac-, and EtOH-edited datasets</li>
</ul>
</div>
<div id="minor-changes-1" class="section level3">
<h3>Minor changes</h3>
<ul>
<li>Noise estimation in <code>CalcNoise.m</code>, <code>Robust_Spectral_Registration.m</code>, and <code>SignalFilter.m</code> is now performed between 8 and 10 ppm to account for datasets that have shorter spectral widths</li>
<li>Cleaned up code in <code>GannetFit.m</code></li>
<li>Quantification of Lac now explicitly defined as Lac+MM</li>
<li>Improved functionality of <code>PaperPlot.m</code></li>
<li>In <code>SiemensTwixRead.m</code>, when a water reference is present, coil sensitivity and phase is based on the point index that is at the top of the echo, rather than simply fixing it to the first point</li>
</ul>
</div>
<div id="bug-fixes-1" class="section level3">
<h3>Bug fixes</h3>
<ul>
<li>Minor bug fixes in CoRegStandAlone functions</li>
<li>Corrected use of random number generation in <code>SignalFilter.m</code> when performing noise replacement to ensure the same results are reproduced each time it is run on a dataset</li>
</ul>
<p><br></p>
</div>
</div>
<div id="section-2" class="section level2">
<h2>3.1.4</h2>
<p><span style="color: grey;">2019-10-03</span></p>
<div id="bug-fix" class="section level3">
<h3>Bug fix</h3>
<ul>
<li>Fixed error in the calculation of <code>AvgDeltaF0</code> for MEGA-PRESS data</li>
</ul>
<p><br></p>
</div>
</div>
<div id="section-3" class="section level2">
<h2>3.1.3</h2>
<p><span style="color: grey;">2019-08-06</span></p>
<div id="new-features-2" class="section level3">
<h3>New features</h3>
<ul>
<li>Major improvements to <code>Robust_Spectral_Registration.m</code></li>
<li>Wavelet toolbox no longer required</li>
<li>Raw data is now phase-corrected prior to alignment</li>
<li><code>GannetLoad.m</code> and <code>GannetFit.m</code> no longer crash if an error occurs during a batch analysis</li>
<li>An error report is printed after the final dataset is loaded/fitted so users can check which datasets failed</li>
<li>Added support for GE revision header 20.007</li>
</ul>
</div>
<div id="minor-change" class="section level3">
<h3>Minor change</h3>
<ul>
<li><code>Water_Positive</code> flag in <code>GannetPreInitialise.m</code> removed</li>
</ul>
</div>
</div>

<!DOCTYPE html>
<br>
<hr>
<p style="text-align: right;">Built with <a href="https://rmarkdown.rstudio.com/" target="_blank">R Markdown</a> and <a href="https://rstudio.com/" target="_blank">RStudio</a>.
  <br><br>
</p>
<p style="text-align: right;">This work by Mark Mikkelsen is licensed under CC BY 4.0 <a href="https://creativecommons.org/licenses/by/4.0" target="_blank"><img id="cc" style="height:22px!important;margin-left: 3px;vertical-align:text-bottom;" src="images/license/cc-xlarge.png"><img id="cc" style="height:22px!important;margin-left: 3px;vertical-align:text-bottom;" src="images/license/by-xlarge.png"></a>
</p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
