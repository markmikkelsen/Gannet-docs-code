<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Getting started</title>

<script src="site_libs/header-attrs-2.30/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="site_libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />
<!DOCTYPE html>
<link rel="shortcut icon" href="images/logo.png" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>


<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>

<style type="text/css">
/* for pandoc --citeproc since 2.11 */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Gannet</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Documentation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="getting-started.html">Getting started</a>
    </li>
    <li>
      <a href="reference.html">Reference</a>
    </li>
    <li>
      <a href="output-structure-attributes.html">Output structure attributes</a>
    </li>
    <li>
      <a href="preprocessing.html">Preprocessing</a>
    </li>
    <li>
      <a href="signal-modeling.html">Signal modeling</a>
    </li>
    <li>
      <a href="data-quality-metrics.html">Data quality metrics</a>
    </li>
    <li>
      <a href="quantification-tissue-correction.html">Quantification &amp; tissue correction</a>
    </li>
    <li>
      <a href="additional-tools.html">Additional tools</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="gannetpreinitialise-settings.html">GannetPreInitialise settings</a>
    </li>
    <li>
      <a href="batch-script.html">Batch processing script</a>
    </li>
    <li>
      <a href="joining-data-files.html">Joining data files</a>
    </li>
  </ul>
</li>
<li>
  <a href="faq.html">FAQ</a>
</li>
<li>
  <a href="release-notes.html">Release notes</a>
</li>
<li>
  <a href="https://forum.mrshub.org/c/mrs-software/gannet/9">Forum</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/markmikkelsen/Gannet/issues">Report an issue</a>
</li>
<li>
  <a href="https://github.com/markmikkelsen/Gannet">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="mailto:mam4041@med.cornell.edu?subject=[Gannet]%20&lt;Please enter the subject of your query here&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Getting started</h1>
<h4 class="date">Last updated: November 04, 2025</h4>

</div>


<button onclick="topFunction()" id="myBtn" title="Go to top">
Back to top
</button>
<script>
//Get the button
var mybutton = document.getElementById("myBtn");

// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>
<p><br></p>
<p>Gannet simplifies the preprocessing, signal fitting, and
quantification pipeline of edited MRS data. All you need to get started
is a basic understanding of MATLAB and the five Gannet modules (listed
below).</p>
<p>If this is your first time using Gannet, you should read through the
<a
href="https://markmikkelsen.github.io/Gannet-docs/reference.html">Reference</a>
as well. If you have previously worked with Gannet and only need a quick
refresher about the command syntax, this page will probably be all you
need to get started again.</p>
<div id="modules" class="section level2 hasAnchor">
<h2 class="hasAnchor">Modules<a href="#modules" class="anchor-section"
aria-label="Anchor link to header"></a></h2>
<p>The linear workflow of Gannet is made up of five modules. For proper
functionality, they need to be executed in the following order:</p>
<table>
<colgroup>
<col width="22%" />
<col width="77%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"><u>Module</u></th>
<th align="left"><u>Description</u></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>GannetLoad</strong></td>
<td align="left">Loads raw data exported from the scanner; preprocesses
them; plots the edited spectra; and gives information about the time
course of the experiment.</td>
</tr>
<tr class="even">
<td align="left"><strong>GannetFit</strong></td>
<td align="left">Models the metabolite signals of interest in the
difference spectra and the reference compounds; plots the data and the
model fits; and gives basic quantification results and information about
spectral quality.</td>
</tr>
<tr class="odd">
<td align="left"><strong>GannetCoRegister</strong></td>
<td align="left">Loads the provided structural image data files;
co-registers the loaded MRS voxel to them; and produces a figure showing
the localization of the voxel on the structural image on three
orthogonal slices.</td>
</tr>
<tr class="even">
<td align="left"><strong>GannetSegment</strong></td>
<td align="left">Calls SPM to segment the structural images; determines
the fractional tissue composition (gray matter, white matter, and CSF)
within the MRS voxel; produces a figure showing the tissue fractions as
overlays and displays CSF-corrected metabolite estimates.</td>
</tr>
<tr class="odd">
<td align="left"><strong>GannetQuantify</strong></td>
<td align="left">Uses the segmentation information to perform partial
volume tissue correction and produces a figure displaying several
tissue-corrected metabolite measurements.</td>
</tr>
</tbody>
</table>
<p>Familiarize yourself with the five basic Gannet commands, as
described below. The number of commands is deliberately kept to a
minimum, as is the number of possible input arguments to these commands.
Incorrect syntax is a common source of user error, so make sure that you
understand the argument structure of each function you intend to
use.</p>
</div>
<div id="usage" class="section level2 hasAnchor">
<h2 class="hasAnchor">Usage<a href="#usage" class="anchor-section"
aria-label="Anchor link to header"></a></h2>
<div id="gannetpreinitialise" class="section level3 hasAnchor">
<h3 class="hasAnchor">GannetPreInitialise<a href="#gannetpreinitialise"
class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The first step in using Gannet is to set up the
<code>GannetPreInitialise.m</code> function. While the toolkit has many
routines that automatically recognize data formats, sequences, and
acquisition parameters from data file headers; some settings need to be
set by the user to run Gannet properly. Additionally,
<code>GannetPreInitialise.m</code> allows the user to choose how to
process their data (for example, which frequency-and-phase correction
algorithm to use).</p>
<div class="warning">
<p><i class="fa fa-exclamation-circle" style="color: white"></i>  Any
time you run Gannet, make sure to check that the settings in
<code>GannetPreInitialise.m</code> are correct. Many errors can be
avoided by following this simple step.</p>
</div>
<p>The default settings pre-initialize a standard analysis for in vivo
GABA-edited MEGA-PRESS data. If you want to analyze data acquired with a
different method or from a phantom, or target a different metabolite,
you will need to make changes to this file. Please read the <a
href="https://markmikkelsen.github.io/Gannet-docs/reference.html#pre-initializing-gannet">Reference</a>
for detailed explanations of the options and flags in
<code>GannetPreInitialise.m</code>.</p>
<p><img src="images/getting-started/GannetPreInitialise-example.png" alt="A screenshot example of GannetPreInitialise.m"/></p>
</div>
<div id="loading-and-fitting-data" class="section level3 hasAnchor">
<h3 class="hasAnchor">Loading and fitting data<a
href="#loading-and-fitting-data" class="anchor-section"
aria-label="Anchor link to header"></a></h3>
<p>Depending on the format of your data, and if you have water reference
data and/or structural images, the commands for running Gannet to load
and fit your data follow a specific syntax.</p>
<p>For all modules, an output argument containing a structure should
always be included, for example <code>MRS_struct</code>. Input arguments
for <code>GannetLoad.m</code> are usually given as cell arrays.
Water-suppressed metabolite files must be given as the first input
argument, while unsuppressed water reference files must be given as the
second input argument. The remaining modules require input of the output
structure from <code>GannetLoad.m</code>. (The exception is
<code>GannetCoRegister.m</code>, which additionally requires a cell
array of structural images.)</p>
<p>Some examples for different data file formats:</p>
<div id="dicom-data-.dcm-files" class="section level4 hasAnchor">
<h4 class="hasAnchor">DICOM data (*.dcm files)<a
href="#dicom-data-.dcm-files" class="anchor-section"
aria-label="Anchor link to header"></a></h4>
<p>The DICOM format saves each transient in a separate file, such that
for an acquisition with 320 transients, there will be 320 DICOM files.
Data from each acquisition should be stored in an individual directory.
To run such data, use the following commands:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode octave"><code class="sourceCode octave"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetLoad({<span class="st">&#39;metab/file1.dcm&#39;</span>}<span class="op">,</span> {<span class="st">&#39;water/file1.dcm&#39;</span>})<span class="op">;</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetFit(MRS_struct)<span class="op">;</span></span></code></pre></div>
<div class="info">
<p><i class="fa fa-info-circle" style="color: white"></i>  Note how the
metabolite and water data are stored in separate directories and that a
single DICOM file is selected for data loading (it does not matter which
file in each directory is chosen).</p>
</div>
</div>
<div id="ge-data-.7-files" class="section level4 hasAnchor">
<h4 class="hasAnchor"><strong>GE data (*.7 files)</strong><a
href="#ge-data-.7-files" class="anchor-section"
aria-label="Anchor link to header"></a></h4>
<p>Data from GE scanners are exported as a P-file, with the extension
*.7. Standard GE acquisitions automatically acquire a water reference,
which is stored within the P-file. To run such data, use the following
commands:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode octave"><code class="sourceCode octave"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetLoad({<span class="st">&#39;sub-01.7&#39;</span>})<span class="op">;</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetFit(MRS_struct)<span class="op">;</span></span></code></pre></div>
</div>
<div id="nifti-data-.nii.gz-files" class="section level4 hasAnchor">
<h4 class="hasAnchor"><strong>NIfTI data (*.nii[.gz] files)</strong><a
href="#nifti-data-.nii.gz-files" class="anchor-section"
aria-label="Anchor link to header"></a></h4>
<p><a href="https://doi.org/10.1002/mrm.29418" target="_blank">NIfTI-MRS</a>
was developed to serve as an open-source data format standard for MRS.
Both compressed and uncompressed files can be processed in Gannet. To
run such data, use the following commands:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode octave"><code class="sourceCode octave"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetLoad({<span class="st">&#39;sub-01.nii&#39;</span>}<span class="op">,</span> {<span class="st">&#39;sub-01_ref.nii&#39;</span>})<span class="op">;</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetFit(MRS_struct)<span class="op">;</span></span></code></pre></div>
</div>
<div id="philips-data-.sdat.spar-files"
class="section level4 hasAnchor">
<h4 class="hasAnchor"><strong>Philips data (*.sdat/*.spar
files)</strong><a href="#philips-data-.sdat.spar-files"
class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Data from Philips scanners are most commonly exported as a pair of
*.sdat/*.spar files, where the *.sdat file contains the data and the
*.spar contains the acquisition parameters. A water reference usually is
also acquired and exported as a separate pair of files. The two are
distinguished by the suffices <code>_act</code> and <code>_ref</code>.
To run such data, use the following commands:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode octave"><code class="sourceCode octave"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetLoad({<span class="st">&#39;sub-01_act.sdat&#39;</span>}<span class="op">,</span> {<span class="st">&#39;sub-01_ref.sdat&#39;</span>})<span class="op">;</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetFit(MRS_struct)<span class="op">;</span></span></code></pre></div>
<div class="info">
<p><i class="fa fa-info-circle" style="color: white"></i>  The *.spar
files must be in the same directory as the *.sdat files, otherwise an
error will occur.</p>
</div>
</div>
<div id="siemens-data-.dat-files" class="section level4 hasAnchor">
<h4 class="hasAnchor"><strong>Siemens data (*.dat files)</strong><a
href="#siemens-data-.dat-files" class="anchor-section"
aria-label="Anchor link to header"></a></h4>
<p>It is highly recommended that users export data in the TWIX format
for Siemens data. This is a raw format that saves the MRS signal for
each transient from each RF coil element separately. To run such data,
use the following commands:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode octave"><code class="sourceCode octave"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetLoad({<span class="st">&#39;sub-01.dat&#39;</span>}<span class="op">,</span> {<span class="st">&#39;sub-01_water.dat&#39;</span>})<span class="op">;</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetFit(MRS_struct)<span class="op">;</span></span></code></pre></div>
</div>
<div id="siemens-data-.ima-files" class="section level4 hasAnchor">
<h4 class="hasAnchor"><strong>Siemens data (*.ima files)</strong><a
href="#siemens-data-.ima-files" class="anchor-section"
aria-label="Anchor link to header"></a></h4>
<p>The Siemens DICOM-structured IMA format saves each transient in a
separate file, such that for an acquisition with 320 transients, there
will be 320 IMA files. Data from each acquisition should be stored in an
individual directory. To run such data, use the following commands:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode octave"><code class="sourceCode octave"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetLoad({<span class="st">&#39;metab/file1.ima&#39;</span>}<span class="op">,</span> {<span class="st">&#39;water/file1.ima&#39;</span>})<span class="op">;</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetFit(MRS_struct)<span class="op">;</span></span></code></pre></div>
<div class="info">
<p><i class="fa fa-info-circle" style="color: white"></i>  Note how the
metabolite and water data are stored in separate directories and that a
single IMA file is selected for data loading (it does not matter which
file in each directory is chosen).</p>
</div>
</div>
<div id="siemens-data-.rda-files" class="section level4 hasAnchor">
<h4 class="hasAnchor"><strong>Siemens data (*.rda files)</strong><a
href="#siemens-data-.rda-files" class="anchor-section"
aria-label="Anchor link to header"></a></h4>
<p>The Siemens RDA format for edited MRS data usually sums the edit-ON
and edit-OFF transients and exports them as single files. A third file
with the resulting difference spectrum may also be exported. This format
is not recommended for use in Gannet as a number of important
preprocessing steps cannot be run. However, to run such data, use the
following commands:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode octave"><code class="sourceCode octave"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetLoad({<span class="st">&#39;OFF.rda&#39;</span><span class="op">,</span> <span class="st">&#39;ON.rda&#39;</span>})<span class="op">;</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetFit(MRS_struct)<span class="op">;</span></span></code></pre></div>
<div class="info">
<p><i class="fa fa-info-circle" style="color: white"></i>  Note that the
edit-OFF file must be input first.</p>
</div>
</div>
</div>
<div id="co-registration-to-mr-images" class="section level3 hasAnchor">
<h3 class="hasAnchor">Co-registration to MR images<a
href="#co-registration-to-mr-images" class="anchor-section"
aria-label="Anchor link to header"></a></h3>
<p>After MRS data files are loaded and fitted, and if an structural MR
image was acquired and used to place MRS voxels, Gannet can co-register
the two and create a binary voxel mask in image space. To do so, use the
following command:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode octave"><code class="sourceCode octave"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetCoRegister(MRS_struct<span class="op">,</span> {<span class="st">&#39;T1w.nii&#39;</span>})<span class="op">;</span></span></code></pre></div>
</div>
<div id="segmenting-mr-images" class="section level3 hasAnchor">
<h3 class="hasAnchor">Segmenting MR images<a
href="#segmenting-mr-images" class="anchor-section"
aria-label="Anchor link to header"></a></h3>
<p>Gannet uses SPM12’s segmentation routine to segment structural MR
images into grey matter (GM), white matter (WM), and cerebrospinal fluid
(CSF) probabilistic tissue maps, from which voxel tissue fractions are
then used in subsequent tissue corrections of metabolite concentration
estimates.</p>
<p>Installation instructions for SPM12 can be found <a
href="https://markmikkelsen.github.io/Gannet-docs/index.html#installation">here</a>.</p>
<p>Run segmentation using the following command:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode octave"><code class="sourceCode octave"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetSegment(MRS_struct)<span class="op">;</span></span></code></pre></div>
</div>
<div id="quantification" class="section level3 hasAnchor">
<h3 class="hasAnchor">Quantification<a href="#quantification"
class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Following tissue segmentation, and assuming a water reference was
inputted at data loading, pseudo-absolute quantification can be
performed using the following command:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode octave"><code class="sourceCode octave"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetQuantify(MRS_struct)<span class="op">;</span></span></code></pre></div>
</div>
</div>
<div id="compatibility-with-bids" class="section level2 hasAnchor">
<h2 class="hasAnchor">Compatibility with BIDS<a
href="#compatibility-with-bids" class="anchor-section"
aria-label="Anchor link to header"></a></h2>
<p>Users are encouraged to organize their MRS data and metadata
according to the Brain Imaging Data Structure (BIDS)<span
class="citation"><sup><a href="#ref-Gorgolewski2016">1</a>,<a
href="#ref-Bouchard2025">2</a></sup></span>. Full details about the
standard can be found on the
<a href="https://bids-specification.readthedocs.io/en/stable/" target="_blank">BIDS
website</a>. MRS specifications can be found
<a href="https://bids-specification.readthedocs.io/en/stable/modality-specific-files/magnetic-resonance-spectroscopy.html" target="_blank">here</a>.</p>
<div class="info">
<p><i class="fa fa-info-circle" style="color: white"></i> While Gannet
will automatically check if users’ BIDS datasets are valid, users may
also wish to validate their datasets using the
<a href="https://bids-validator.readthedocs.io/en/stable/" target="_blank"><u>BIDS
Validator</u></a>, which will perform a more thorough validation
check.</p>
</div>
<div id="loading-data" class="section level3 hasAnchor">
<h3 class="hasAnchor">Loading data<a href="#loading-data"
class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The command syntax for loading a BIDS dataset is slightly different.
The base directory path name of a BIDS dataset is entered into
<code>GannetLoad.m</code> as a cell array as the first input argument.
The second input argument is a cell array that specifies which MRS data
to process. This is the label used with the <code>acq</code> entity in
the filenames of the single-voxel MRS data files (those ending in
<code>*_svs.nii[.gz]</code>) to be processed. If the second input
argument is not provided, Gannet will process all single-voxel MRS data
files in the dataset.</p>
<p>Unsuppressed water reference files are automatically found by parsing
the relevant <code>*_svs.json</code> files for the
<code>ReferenceSignal</code> key.</p>
<p><code>GannetCoRegister.m</code> does not require a second input
argument for structural image filenames as Gannet will search for the
path names of the images associated with each MRS acquisition stored in
the <code>AnatomicalImage</code> key in the <code>*_svs.json</code>
files.</p>
<p>This shows that it is crucial that users adhere to the BIDS
specifications to avoid running into errors.</p>
<p>Example usage:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode octave"><code class="sourceCode octave"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetLoad({<span class="st">&#39;path/to/bids_dataset/&#39;</span>}<span class="op">,</span> {<span class="st">&#39;megapress&#39;</span>})<span class="op">;</span> <span class="co">% &#39;megapress&#39; would be the &#39;acq&#39; entity label for the MEGA-PRESS files in &#39;path/to/bids_dataset/&#39;</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetFit(MRS_struct)<span class="op">;</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetCoRegister(MRS_struct)<span class="op">;</span> <span class="co">% No second input argument is needed as Gannet will find the associated structural images from the *_svs.json files</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetSegment(MRS_struct)<span class="op">;</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetQuantify(MRS_struct)<span class="op">;</span></span></code></pre></div>
<p>As shown, only the path name of the BIDS dataset base directory is
inputted into <code>GannetLoad.m</code>. Gannet will then automatically
parse the subject (and session) subdirectories to find all relevant
single-voxel MRS data files, including water signal references and
structural MR images.</p>
</div>
</div>
<div id="batch-processing" class="section level2 hasAnchor">
<h2 class="hasAnchor">Batch processing<a href="#batch-processing"
class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>One of the major strengths of Gannet is its ability to process
datasets in batches using the same pipeline. To load and fit multiple
files, simply add more filenames to the respective cell arrays that are
passed to <code>GannetLoad.m</code>, as shown below for Philips
data:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode octave"><code class="sourceCode octave"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetLoad({<span class="st">&#39;sub-01_act.sdat&#39;</span><span class="op">,</span> <span class="st">&#39;sub-02_act.sdat&#39;</span><span class="op">,</span> <span class="st">&#39;sub-03_act.sdat&#39;</span>}<span class="op">,</span> <span class="op">...</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>                        {<span class="st">&#39;sub-01_ref.sdat&#39;</span><span class="op">,</span> <span class="st">&#39;sub-02_ref.sdat&#39;</span><span class="op">,</span> <span class="st">&#39;sub-03_ref.sdat&#39;</span>})<span class="op">;</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetFit(MRS_struct)<span class="op">;</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="co">% Only if structural MR images are available can the next lines can be run</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="co">% Note that the number of structural images must match the number of MRS metabolite data files inputted in GannetLoad</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetCoRegister(MRS_struct<span class="op">,</span> {<span class="st">&#39;T1w.nii&#39;</span><span class="op">,</span> <span class="st">&#39;T1w.nii&#39;</span><span class="op">,</span> <span class="st">&#39;T1w.nii&#39;</span>})<span class="op">;</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetSegment(MRS_struct)<span class="op">;</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>MRS_struct <span class="op">=</span> GannetQuantify(MRS_struct)<span class="op">;</span></span></code></pre></div>
<p>The respective water reference files <code>sub-01_ref.sdat</code>,
<code>sub-02_ref.sdat</code>, etc. need to be listed in the same order
as the water-suppressed files <code>sub-01_act.sdat</code>,
<code>sub-01_act.sdat</code>, etc. If you intend to process a large
number of datasets, we recommend writing a script as a clear way of
defining the input cell arrays.</p>
<p>We have provided an <a
href="https://markmikkelsen.github.io/Gannet-docs/batch-script.html">example
batch processing script</a> that you may modify for your own
purposes.</p>
</div>
<div id="joining-data-files" class="section level2 hasAnchor">
<h2 class="hasAnchor">Joining data files<a href="#joining-data-files"
class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In some instances users may want to conjoin consecutively acquired
data files, such that they are processed as if they were one single
dataset. Gannet is able to do this. To enable this functionality, the
<code>join</code> flag in <code>GannetPreInitialise.m</code> must be set
to <code>1</code>.</p>
<p>However, there is a different command syntax when batch-processing
across multiple subjects’ datasets In such cases, rather than entering
files as vectors, the input cell arrays must be M <span
class="math inline">\(\times\)</span> N matrices, where M is the number
of files per subject to be conjoined and N is the number of
subjects.</p>
<p>We have provided an <a
href="https://markmikkelsen.github.io/Gannet-docs/joining-data-files.html">example
script</a> for joining files.</p>
</div>
<div id="output" class="section level2 hasAnchor">
<h2 class="hasAnchor">Output<a href="#output" class="anchor-section"
aria-label="Anchor link to header"></a></h2>
<p>As shown in the syntax above, Gannet saves all relevant data and
results in a structure (e.g., <code>MRS_struct</code>) at all steps in
the analysis pipeline. After creating the initial output from
<code>GannetLoad.m</code>, <code>MRS_struct</code> is used as both the
output and input arguments for the other Gannet modules. (You need not
use <code>MRS_struct</code>; you can use something more descriptive and
relevant to your purposes if you wish.)</p>
<p>The output structure contains several fields and subfields, which
grow in number as your proceed through the Gannet analysis pipeline. See
the list of <a
href="https://markmikkelsen.github.io/Gannet-docs/output-structure-attributes.html">output
structure attributes</a> for a complete description.</p>
<p>You can also output a CSV file containing useful values from the
output structure for further analysis in a statistical program of your
choice. This functionality is set in
<code>GannetPreInitialise.m</code>.</p>
<div id="references" class="section level3 unnumbered hasAnchor">
<h3 class="unnumbered hasAnchor">References<a href="#references"
class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body">
<div id="ref-Gorgolewski2016" class="csl-entry">
<div class="csl-left-margin">1. </div><div
class="csl-right-inline">Gorgolewski KJ, Auer T, Calhoun VD, et al.
<span class="nocase">The brain imaging data structure, a format for
organizing and describing outputs of neuroimaging experiments</span>.
<em>Scientific Data</em>. 2016;3(1):160044. doi:<a
href="https://doi.org/10.1038/sdata.2016.44">10.1038/sdata.2016.44</a></div>
</div>
<div id="ref-Bouchard2025" class="csl-entry">
<div class="csl-left-margin">2. </div><div
class="csl-right-inline">Bouchard AE, Wong D, Bogner W, et al. <span
class="nocase">MRS-BIDS, an extension to the Brain Imaging Data
Structure for magnetic resonance spectroscopy</span>. <em>Scientific
Data</em>. 2025;12(1):1384. doi:<a
href="https://doi.org/10.1038/s41597-025-05543-2">10.1038/s41597-025-05543-2</a></div>
</div>
</div>
</div>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiR2V0dGluZyBzdGFydGVkIgpkYXRlOiAiTGFzdCB1cGRhdGVkOiBgciBmb3JtYXQoU3lzLnRpbWUoKSwgJyVCICVkLCAlWScpYCIKYmlibGlvZ3JhcGh5OiBiaWJsaW9ncmFwaHkuYmliCmNzbDogYW1lcmljYW4tbWVkaWNhbC1hc3NvY2lhdGlvbi5jc2wKbGluay1jaXRhdGlvbnM6IHllcwpvdXRwdXQ6CiAgaHRtbF9kb2N1bWVudDoKICAgIHRvYzogVFJVRQogICAgdG9jX2RlcHRoOiAzCiAgICB0b2NfZmxvYXQ6CiAgICAgIGNvbGxhcHNlZDogRkFMU0UKLS0tCgpgYGB7ciBzZXR1cCwgaW5jbHVkZSA9IEZBTFNFfQprbml0cjo6b3B0c19jaHVuayRzZXQoZWNobyA9IFRSVUUpCmBgYAoKYGBge3IsIGNoaWxkID0gImpzL2JhY2stdG8tdG9wLmpzIn0KYGBgCgo8YnI+CgpHYW5uZXQgc2ltcGxpZmllcyB0aGUgcHJlcHJvY2Vzc2luZywgc2lnbmFsIGZpdHRpbmcsIGFuZCBxdWFudGlmaWNhdGlvbiBwaXBlbGluZSBvZiBlZGl0ZWQgTVJTIGRhdGEuIEFsbCB5b3UgbmVlZCB0byBnZXQgc3RhcnRlZCBpcyBhIGJhc2ljIHVuZGVyc3RhbmRpbmcgb2YgTUFUTEFCIGFuZCB0aGUgZml2ZSBHYW5uZXQgbW9kdWxlcyAobGlzdGVkIGJlbG93KS4KCklmIHRoaXMgaXMgeW91ciBmaXJzdCB0aW1lIHVzaW5nIEdhbm5ldCwgeW91IHNob3VsZCByZWFkIHRocm91Z2ggdGhlIFtSZWZlcmVuY2VdKGh0dHBzOi8vbWFya21pa2tlbHNlbi5naXRodWIuaW8vR2FubmV0LWRvY3MvcmVmZXJlbmNlLmh0bWwpIGFzIHdlbGwuIElmIHlvdSBoYXZlIHByZXZpb3VzbHkgd29ya2VkIHdpdGggR2FubmV0IGFuZCBvbmx5IG5lZWQgYSBxdWljayByZWZyZXNoZXIgYWJvdXQgdGhlIGNvbW1hbmQgc3ludGF4LCB0aGlzIHBhZ2Ugd2lsbCBwcm9iYWJseSBiZSBhbGwgeW91IG5lZWQgdG8gZ2V0IHN0YXJ0ZWQgYWdhaW4uCgojIyBNb2R1bGVzCgpUaGUgbGluZWFyIHdvcmtmbG93IG9mIEdhbm5ldCBpcyBtYWRlIHVwIG9mIGZpdmUgbW9kdWxlcy4gRm9yIHByb3BlciBmdW5jdGlvbmFsaXR5LCB0aGV5IG5lZWQgdG8gYmUgZXhlY3V0ZWQgaW4gdGhlIGZvbGxvd2luZyBvcmRlcjoKCnwgPHU+TW9kdWxlPC91PiB8IDx1PkRlc2NyaXB0aW9uPC91PiB8Cnw6LS0tLS0tLS0tLS0tLS0tfDotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfAp8ICoqR2FubmV0TG9hZCoqIHwgTG9hZHMgcmF3IGRhdGEgZXhwb3J0ZWQgZnJvbSB0aGUgc2Nhbm5lcjsgcHJlcHJvY2Vzc2VzIHRoZW07IHBsb3RzIHRoZSBlZGl0ZWQgc3BlY3RyYTsgYW5kIGdpdmVzIGluZm9ybWF0aW9uIGFib3V0IHRoZSB0aW1lIGNvdXJzZSBvZiB0aGUgZXhwZXJpbWVudC4gfAp8ICoqR2FubmV0Rml0KiogfCBNb2RlbHMgdGhlIG1ldGFib2xpdGUgc2lnbmFscyBvZiBpbnRlcmVzdCBpbiB0aGUgZGlmZmVyZW5jZSBzcGVjdHJhIGFuZCB0aGUgcmVmZXJlbmNlIGNvbXBvdW5kczsgcGxvdHMgdGhlIGRhdGEgYW5kIHRoZSBtb2RlbCBmaXRzOyBhbmQgZ2l2ZXMgYmFzaWMgcXVhbnRpZmljYXRpb24gcmVzdWx0cyBhbmQgaW5mb3JtYXRpb24gYWJvdXQgc3BlY3RyYWwgcXVhbGl0eS4gfAp8ICoqR2FubmV0Q29SZWdpc3RlcioqIHwgTG9hZHMgdGhlIHByb3ZpZGVkIHN0cnVjdHVyYWwgaW1hZ2UgZGF0YSBmaWxlczsgY28tcmVnaXN0ZXJzIHRoZSBsb2FkZWQgTVJTIHZveGVsIHRvIHRoZW07IGFuZCBwcm9kdWNlcyBhIGZpZ3VyZSBzaG93aW5nIHRoZSBsb2NhbGl6YXRpb24gb2YgdGhlIHZveGVsIG9uIHRoZSBzdHJ1Y3R1cmFsIGltYWdlIG9uIHRocmVlIG9ydGhvZ29uYWwgc2xpY2VzLiB8CnwgKipHYW5uZXRTZWdtZW50KiogfCBDYWxscyBTUE0gdG8gc2VnbWVudCB0aGUgc3RydWN0dXJhbCBpbWFnZXM7IGRldGVybWluZXMgdGhlIGZyYWN0aW9uYWwgdGlzc3VlIGNvbXBvc2l0aW9uIChncmF5IG1hdHRlciwgd2hpdGUgbWF0dGVyLCBhbmQgQ1NGKSB3aXRoaW4gdGhlIE1SUyB2b3hlbDsgcHJvZHVjZXMgYSBmaWd1cmUgc2hvd2luZyB0aGUgdGlzc3VlIGZyYWN0aW9ucyBhcyBvdmVybGF5cyBhbmQgZGlzcGxheXMgQ1NGLWNvcnJlY3RlZCBtZXRhYm9saXRlIGVzdGltYXRlcy4gfAp8ICoqR2FubmV0UXVhbnRpZnkqKiB8IFVzZXMgdGhlIHNlZ21lbnRhdGlvbiBpbmZvcm1hdGlvbiB0byBwZXJmb3JtIHBhcnRpYWwgdm9sdW1lIHRpc3N1ZSBjb3JyZWN0aW9uIGFuZCBwcm9kdWNlcyBhIGZpZ3VyZSBkaXNwbGF5aW5nIHNldmVyYWwgdGlzc3VlLWNvcnJlY3RlZCBtZXRhYm9saXRlIG1lYXN1cmVtZW50cy4gfAoKRmFtaWxpYXJpemUgeW91cnNlbGYgd2l0aCB0aGUgZml2ZSBiYXNpYyBHYW5uZXQgY29tbWFuZHMsIGFzIGRlc2NyaWJlZCBiZWxvdy4gVGhlIG51bWJlciBvZiBjb21tYW5kcyBpcyBkZWxpYmVyYXRlbHkga2VwdCB0byBhIG1pbmltdW0sIGFzIGlzIHRoZSBudW1iZXIgb2YgcG9zc2libGUgaW5wdXQgYXJndW1lbnRzIHRvIHRoZXNlIGNvbW1hbmRzLiBJbmNvcnJlY3Qgc3ludGF4IGlzIGEgY29tbW9uIHNvdXJjZSBvZiB1c2VyIGVycm9yLCBzbyBtYWtlIHN1cmUgdGhhdCB5b3UgdW5kZXJzdGFuZCB0aGUgYXJndW1lbnQgc3RydWN0dXJlIG9mIGVhY2ggZnVuY3Rpb24geW91IGludGVuZCB0byB1c2UuCgojIyBVc2FnZQoKIyMjIEdhbm5ldFByZUluaXRpYWxpc2UKClRoZSBmaXJzdCBzdGVwIGluIHVzaW5nIEdhbm5ldCBpcyB0byBzZXQgdXAgdGhlIGBHYW5uZXRQcmVJbml0aWFsaXNlLm1gIGZ1bmN0aW9uLiBXaGlsZSB0aGUgdG9vbGtpdCBoYXMgbWFueSByb3V0aW5lcyB0aGF0IGF1dG9tYXRpY2FsbHkgcmVjb2duaXplIGRhdGEgZm9ybWF0cywgc2VxdWVuY2VzLCBhbmQgYWNxdWlzaXRpb24gcGFyYW1ldGVycyBmcm9tIGRhdGEgZmlsZSBoZWFkZXJzOyBzb21lIHNldHRpbmdzIG5lZWQgdG8gYmUgc2V0IGJ5IHRoZSB1c2VyIHRvIHJ1biBHYW5uZXQgcHJvcGVybHkuIEFkZGl0aW9uYWxseSwgYEdhbm5ldFByZUluaXRpYWxpc2UubWAgYWxsb3dzIHRoZSB1c2VyIHRvIGNob29zZSBob3cgdG8gcHJvY2VzcyB0aGVpciBkYXRhIChmb3IgZXhhbXBsZSwgd2hpY2ggZnJlcXVlbmN5LWFuZC1waGFzZSBjb3JyZWN0aW9uIGFsZ29yaXRobSB0byB1c2UpLgoKOjo6IHdhcm5pbmcKPGkgY2xhc3M9ImZhIGZhLWV4Y2xhbWF0aW9uLWNpcmNsZSIgc3R5bGU9ImNvbG9yOiB3aGl0ZSI+PC9pPsKgIEFueSB0aW1lIHlvdSBydW4gR2FubmV0LCBtYWtlIHN1cmUgdG8gY2hlY2sgdGhhdCB0aGUgc2V0dGluZ3MgaW4gYEdhbm5ldFByZUluaXRpYWxpc2UubWAgYXJlIGNvcnJlY3QuIE1hbnkgZXJyb3JzIGNhbiBiZSBhdm9pZGVkIGJ5IGZvbGxvd2luZyB0aGlzIHNpbXBsZSBzdGVwLgo6OjoKClRoZSBkZWZhdWx0IHNldHRpbmdzIHByZS1pbml0aWFsaXplIGEgc3RhbmRhcmQgYW5hbHlzaXMgZm9yIGluIHZpdm8gR0FCQS1lZGl0ZWQgTUVHQS1QUkVTUyBkYXRhLiBJZiB5b3Ugd2FudCB0byBhbmFseXplIGRhdGEgYWNxdWlyZWQgd2l0aCBhIGRpZmZlcmVudCBtZXRob2Qgb3IgZnJvbSBhIHBoYW50b20sIG9yIHRhcmdldCBhIGRpZmZlcmVudCBtZXRhYm9saXRlLCB5b3Ugd2lsbCBuZWVkIHRvIG1ha2UgY2hhbmdlcyB0byB0aGlzIGZpbGUuIFBsZWFzZSByZWFkIHRoZSBbUmVmZXJlbmNlXShodHRwczovL21hcmttaWtrZWxzZW4uZ2l0aHViLmlvL0dhbm5ldC1kb2NzL3JlZmVyZW5jZS5odG1sI3ByZS1pbml0aWFsaXppbmctZ2FubmV0KSBmb3IgZGV0YWlsZWQgZXhwbGFuYXRpb25zIG9mIHRoZSBvcHRpb25zIGFuZCBmbGFncyBpbiBgR2FubmV0UHJlSW5pdGlhbGlzZS5tYC4KCjxpbWcgc3JjPSJpbWFnZXMvZ2V0dGluZy1zdGFydGVkL0dhbm5ldFByZUluaXRpYWxpc2UtZXhhbXBsZS5wbmciIGFsdD0iQSBzY3JlZW5zaG90IGV4YW1wbGUgb2YgR2FubmV0UHJlSW5pdGlhbGlzZS5tIi8+CgojIyMgTG9hZGluZyBhbmQgZml0dGluZyBkYXRhCgpEZXBlbmRpbmcgb24gdGhlIGZvcm1hdCBvZiB5b3VyIGRhdGEsIGFuZCBpZiB5b3UgaGF2ZSB3YXRlciByZWZlcmVuY2UgZGF0YSBhbmQvb3Igc3RydWN0dXJhbCBpbWFnZXMsIHRoZSBjb21tYW5kcyBmb3IgcnVubmluZyBHYW5uZXQgdG8gbG9hZCBhbmQgZml0IHlvdXIgZGF0YSBmb2xsb3cgYSBzcGVjaWZpYyBzeW50YXguCgpGb3IgYWxsIG1vZHVsZXMsIGFuIG91dHB1dCBhcmd1bWVudCBjb250YWluaW5nIGEgc3RydWN0dXJlIHNob3VsZCBhbHdheXMgYmUgaW5jbHVkZWQsIGZvciBleGFtcGxlIGBNUlNfc3RydWN0YC4gSW5wdXQgYXJndW1lbnRzIGZvciBgR2FubmV0TG9hZC5tYCBhcmUgdXN1YWxseSBnaXZlbiBhcyBjZWxsIGFycmF5cy4gV2F0ZXItc3VwcHJlc3NlZCBtZXRhYm9saXRlIGZpbGVzIG11c3QgYmUgZ2l2ZW4gYXMgdGhlIGZpcnN0IGlucHV0IGFyZ3VtZW50LCB3aGlsZSB1bnN1cHByZXNzZWQgd2F0ZXIgcmVmZXJlbmNlIGZpbGVzIG11c3QgYmUgZ2l2ZW4gYXMgdGhlIHNlY29uZCBpbnB1dCBhcmd1bWVudC4gVGhlIHJlbWFpbmluZyBtb2R1bGVzIHJlcXVpcmUgaW5wdXQgb2YgdGhlIG91dHB1dCBzdHJ1Y3R1cmUgZnJvbSBgR2FubmV0TG9hZC5tYC4gKFRoZSBleGNlcHRpb24gaXMgYEdhbm5ldENvUmVnaXN0ZXIubWAsIHdoaWNoIGFkZGl0aW9uYWxseSByZXF1aXJlcyBhIGNlbGwgYXJyYXkgb2Ygc3RydWN0dXJhbCBpbWFnZXMuKQoKU29tZSBleGFtcGxlcyBmb3IgZGlmZmVyZW50IGRhdGEgZmlsZSBmb3JtYXRzOgoKIyMjIyBESUNPTSBkYXRhIChcKi5kY20gZmlsZXMpCgpUaGUgRElDT00gZm9ybWF0IHNhdmVzIGVhY2ggdHJhbnNpZW50IGluIGEgc2VwYXJhdGUgZmlsZSwgc3VjaCB0aGF0IGZvciBhbiBhY3F1aXNpdGlvbiB3aXRoIDMyMCB0cmFuc2llbnRzLCB0aGVyZSB3aWxsIGJlIDMyMCBESUNPTSBmaWxlcy4gRGF0YSBmcm9tIGVhY2ggYWNxdWlzaXRpb24gc2hvdWxkIGJlIHN0b3JlZCBpbiBhbiBpbmRpdmlkdWFsIGRpcmVjdG9yeS4gVG8gcnVuIHN1Y2ggZGF0YSwgdXNlIHRoZSBmb2xsb3dpbmcgY29tbWFuZHM6CgpgYGB7b2N0YXZlLCBldmFsID0gRkFMU0V9Ck1SU19zdHJ1Y3QgPSBHYW5uZXRMb2FkKHsnbWV0YWIvZmlsZTEuZGNtJ30sIHsnd2F0ZXIvZmlsZTEuZGNtJ30pOwpNUlNfc3RydWN0ID0gR2FubmV0Rml0KE1SU19zdHJ1Y3QpOwpgYGAKCjo6OiBpbmZvCjxpIGNsYXNzPSJmYSBmYS1pbmZvLWNpcmNsZSIgc3R5bGU9ImNvbG9yOiB3aGl0ZSI+PC9pPsKgIE5vdGUgaG93IHRoZSBtZXRhYm9saXRlIGFuZCB3YXRlciBkYXRhIGFyZSBzdG9yZWQgaW4gc2VwYXJhdGUgZGlyZWN0b3JpZXMgYW5kIHRoYXQgYSBzaW5nbGUgRElDT00gZmlsZSBpcyBzZWxlY3RlZCBmb3IgZGF0YSBsb2FkaW5nIChpdCBkb2VzIG5vdCBtYXR0ZXIgd2hpY2ggZmlsZSBpbiBlYWNoIGRpcmVjdG9yeSBpcyBjaG9zZW4pLgo6OjoKCiMjIyMgKipHRSBkYXRhIChcKi43IGZpbGVzKSoqCgpEYXRhIGZyb20gR0Ugc2Nhbm5lcnMgYXJlIGV4cG9ydGVkIGFzIGEgUC1maWxlLCB3aXRoIHRoZSBleHRlbnNpb24gXCouNy4gU3RhbmRhcmQgR0UgYWNxdWlzaXRpb25zIGF1dG9tYXRpY2FsbHkgYWNxdWlyZSBhIHdhdGVyIHJlZmVyZW5jZSwgd2hpY2ggaXMgc3RvcmVkIHdpdGhpbiB0aGUgUC1maWxlLiBUbyBydW4gc3VjaCBkYXRhLCB1c2UgdGhlIGZvbGxvd2luZyBjb21tYW5kczoKCmBgYHtvY3RhdmUsIGV2YWwgPSBGQUxTRX0KTVJTX3N0cnVjdCA9IEdhbm5ldExvYWQoeydzdWItMDEuNyd9KTsKTVJTX3N0cnVjdCA9IEdhbm5ldEZpdChNUlNfc3RydWN0KTsKYGBgCgojIyMjICoqTklmVEkgZGF0YSAoXCoubmlpWy5nel0gZmlsZXMpKioKCjxhIGhyZWY9Imh0dHBzOi8vZG9pLm9yZy8xMC4xMDAyL21ybS4yOTQxOCIgdGFyZ2V0PSJfYmxhbmsiPk5JZlRJLU1SUzwvYT4gd2FzIGRldmVsb3BlZCB0byBzZXJ2ZSBhcyBhbiBvcGVuLXNvdXJjZSBkYXRhIGZvcm1hdCBzdGFuZGFyZCBmb3IgTVJTLiBCb3RoIGNvbXByZXNzZWQgYW5kIHVuY29tcHJlc3NlZCBmaWxlcyBjYW4gYmUgcHJvY2Vzc2VkIGluIEdhbm5ldC4gVG8gcnVuIHN1Y2ggZGF0YSwgdXNlIHRoZSBmb2xsb3dpbmcgY29tbWFuZHM6CgpgYGB7b2N0YXZlLCBldmFsID0gRkFMU0V9Ck1SU19zdHJ1Y3QgPSBHYW5uZXRMb2FkKHsnc3ViLTAxLm5paSd9LCB7J3N1Yi0wMV9yZWYubmlpJ30pOwpNUlNfc3RydWN0ID0gR2FubmV0Rml0KE1SU19zdHJ1Y3QpOwpgYGAKCiMjIyMgKipQaGlsaXBzIGRhdGEgKFwqLnNkYXQvXCouc3BhciBmaWxlcykqKgoKRGF0YSBmcm9tIFBoaWxpcHMgc2Nhbm5lcnMgYXJlIG1vc3QgY29tbW9ubHkgZXhwb3J0ZWQgYXMgYSBwYWlyIG9mIFwqLnNkYXQvXCouc3BhciBmaWxlcywgd2hlcmUgdGhlIFwqLnNkYXQgZmlsZSBjb250YWlucyB0aGUgZGF0YSBhbmQgdGhlIFwqLnNwYXIgY29udGFpbnMgdGhlIGFjcXVpc2l0aW9uIHBhcmFtZXRlcnMuIEEgd2F0ZXIgcmVmZXJlbmNlIHVzdWFsbHkgaXMgYWxzbyBhY3F1aXJlZCBhbmQgZXhwb3J0ZWQgYXMgYSBzZXBhcmF0ZSBwYWlyIG9mIGZpbGVzLiBUaGUgdHdvIGFyZSBkaXN0aW5ndWlzaGVkIGJ5IHRoZSBzdWZmaWNlcyBgX2FjdGAgYW5kIGBfcmVmYC4gVG8gcnVuIHN1Y2ggZGF0YSwgdXNlIHRoZSBmb2xsb3dpbmcgY29tbWFuZHM6CgpgYGB7b2N0YXZlLCBldmFsID0gRkFMU0V9Ck1SU19zdHJ1Y3QgPSBHYW5uZXRMb2FkKHsnc3ViLTAxX2FjdC5zZGF0J30sIHsnc3ViLTAxX3JlZi5zZGF0J30pOwpNUlNfc3RydWN0ID0gR2FubmV0Rml0KE1SU19zdHJ1Y3QpOwpgYGAKCjo6OiBpbmZvCjxpIGNsYXNzPSJmYSBmYS1pbmZvLWNpcmNsZSIgc3R5bGU9ImNvbG9yOiB3aGl0ZSI+PC9pPsKgIFRoZSBcKi5zcGFyIGZpbGVzIG11c3QgYmUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5IGFzIHRoZSBcKi5zZGF0IGZpbGVzLCBvdGhlcndpc2UgYW4gZXJyb3Igd2lsbCBvY2N1ci4KOjo6CgojIyMjICoqU2llbWVucyBkYXRhIChcKi5kYXQgZmlsZXMpKioKCkl0IGlzIGhpZ2hseSByZWNvbW1lbmRlZCB0aGF0IHVzZXJzIGV4cG9ydCBkYXRhIGluIHRoZSBUV0lYIGZvcm1hdCBmb3IgU2llbWVucyBkYXRhLiBUaGlzIGlzIGEgcmF3IGZvcm1hdCB0aGF0IHNhdmVzIHRoZSBNUlMgc2lnbmFsIGZvciBlYWNoIHRyYW5zaWVudCBmcm9tIGVhY2ggUkYgY29pbCBlbGVtZW50IHNlcGFyYXRlbHkuIFRvIHJ1biBzdWNoIGRhdGEsIHVzZSB0aGUgZm9sbG93aW5nIGNvbW1hbmRzOgoKYGBge29jdGF2ZSwgZXZhbCA9IEZBTFNFfQpNUlNfc3RydWN0ID0gR2FubmV0TG9hZCh7J3N1Yi0wMS5kYXQnfSwgeydzdWItMDFfd2F0ZXIuZGF0J30pOwpNUlNfc3RydWN0ID0gR2FubmV0Rml0KE1SU19zdHJ1Y3QpOwpgYGAKCiMjIyMgKipTaWVtZW5zIGRhdGEgKFwqLmltYSBmaWxlcykqKgoKVGhlIFNpZW1lbnMgRElDT00tc3RydWN0dXJlZCBJTUEgZm9ybWF0IHNhdmVzIGVhY2ggdHJhbnNpZW50IGluIGEgc2VwYXJhdGUgZmlsZSwgc3VjaCB0aGF0IGZvciBhbiBhY3F1aXNpdGlvbiB3aXRoIDMyMCB0cmFuc2llbnRzLCB0aGVyZSB3aWxsIGJlIDMyMCBJTUEgZmlsZXMuIERhdGEgZnJvbSBlYWNoIGFjcXVpc2l0aW9uIHNob3VsZCBiZSBzdG9yZWQgaW4gYW4gaW5kaXZpZHVhbCBkaXJlY3RvcnkuIFRvIHJ1biBzdWNoIGRhdGEsIHVzZSB0aGUgZm9sbG93aW5nIGNvbW1hbmRzOgoKYGBge29jdGF2ZSwgZXZhbCA9IEZBTFNFfQpNUlNfc3RydWN0ID0gR2FubmV0TG9hZCh7J21ldGFiL2ZpbGUxLmltYSd9LCB7J3dhdGVyL2ZpbGUxLmltYSd9KTsKTVJTX3N0cnVjdCA9IEdhbm5ldEZpdChNUlNfc3RydWN0KTsKYGBgCgo6OjogaW5mbwo8aSBjbGFzcz0iZmEgZmEtaW5mby1jaXJjbGUiIHN0eWxlPSJjb2xvcjogd2hpdGUiPjwvaT7CoCBOb3RlIGhvdyB0aGUgbWV0YWJvbGl0ZSBhbmQgd2F0ZXIgZGF0YSBhcmUgc3RvcmVkIGluIHNlcGFyYXRlIGRpcmVjdG9yaWVzIGFuZCB0aGF0IGEgc2luZ2xlIElNQSBmaWxlIGlzIHNlbGVjdGVkIGZvciBkYXRhIGxvYWRpbmcgKGl0IGRvZXMgbm90IG1hdHRlciB3aGljaCBmaWxlIGluIGVhY2ggZGlyZWN0b3J5IGlzIGNob3NlbikuCjo6OgoKIyMjIyAqKlNpZW1lbnMgZGF0YSAoXCoucmRhIGZpbGVzKSoqCgpUaGUgU2llbWVucyBSREEgZm9ybWF0IGZvciBlZGl0ZWQgTVJTIGRhdGEgdXN1YWxseSBzdW1zIHRoZSBlZGl0LU9OIGFuZCBlZGl0LU9GRiB0cmFuc2llbnRzIGFuZCBleHBvcnRzIHRoZW0gYXMgc2luZ2xlIGZpbGVzLiBBIHRoaXJkIGZpbGUgd2l0aCB0aGUgcmVzdWx0aW5nIGRpZmZlcmVuY2Ugc3BlY3RydW0gbWF5IGFsc28gYmUgZXhwb3J0ZWQuIFRoaXMgZm9ybWF0IGlzIG5vdCByZWNvbW1lbmRlZCBmb3IgdXNlIGluIEdhbm5ldCBhcyBhIG51bWJlciBvZiBpbXBvcnRhbnQgcHJlcHJvY2Vzc2luZyBzdGVwcyBjYW5ub3QgYmUgcnVuLiBIb3dldmVyLCB0byBydW4gc3VjaCBkYXRhLCB1c2UgdGhlIGZvbGxvd2luZyBjb21tYW5kczoKCmBgYHtvY3RhdmUsIGV2YWwgPSBGQUxTRX0KTVJTX3N0cnVjdCA9IEdhbm5ldExvYWQoeydPRkYucmRhJywgJ09OLnJkYSd9KTsKTVJTX3N0cnVjdCA9IEdhbm5ldEZpdChNUlNfc3RydWN0KTsKYGBgCgo6OjogaW5mbwo8aSBjbGFzcz0iZmEgZmEtaW5mby1jaXJjbGUiIHN0eWxlPSJjb2xvcjogd2hpdGUiPjwvaT7CoCBOb3RlIHRoYXQgdGhlIGVkaXQtT0ZGIGZpbGUgbXVzdCBiZSBpbnB1dCBmaXJzdC4KOjo6CgojIyMgQ28tcmVnaXN0cmF0aW9uIHRvIE1SIGltYWdlcwoKQWZ0ZXIgTVJTIGRhdGEgZmlsZXMgYXJlIGxvYWRlZCBhbmQgZml0dGVkLCBhbmQgaWYgYW4gc3RydWN0dXJhbCBNUiBpbWFnZSB3YXMgYWNxdWlyZWQgYW5kIHVzZWQgdG8gcGxhY2UgTVJTIHZveGVscywgR2FubmV0IGNhbiBjby1yZWdpc3RlciB0aGUgdHdvIGFuZCBjcmVhdGUgYSBiaW5hcnkgdm94ZWwgbWFzayBpbiBpbWFnZSBzcGFjZS4gVG8gZG8gc28sIHVzZSB0aGUgZm9sbG93aW5nIGNvbW1hbmQ6CgpgYGB7b2N0YXZlLCBldmFsID0gRkFMU0V9Ck1SU19zdHJ1Y3QgPSBHYW5uZXRDb1JlZ2lzdGVyKE1SU19zdHJ1Y3QsIHsnVDF3Lm5paSd9KTsKYGBgCgojIyMgU2VnbWVudGluZyBNUiBpbWFnZXMKCkdhbm5ldCB1c2VzIFNQTTEyJ3Mgc2VnbWVudGF0aW9uIHJvdXRpbmUgdG8gc2VnbWVudCBzdHJ1Y3R1cmFsIE1SIGltYWdlcyBpbnRvIGdyZXkgbWF0dGVyIChHTSksIHdoaXRlIG1hdHRlciAoV00pLCBhbmQgY2VyZWJyb3NwaW5hbCBmbHVpZCAoQ1NGKSBwcm9iYWJpbGlzdGljIHRpc3N1ZSBtYXBzLCBmcm9tIHdoaWNoIHZveGVsIHRpc3N1ZSBmcmFjdGlvbnMgYXJlIHRoZW4gdXNlZCBpbiBzdWJzZXF1ZW50IHRpc3N1ZSBjb3JyZWN0aW9ucyBvZiBtZXRhYm9saXRlIGNvbmNlbnRyYXRpb24gZXN0aW1hdGVzLgoKSW5zdGFsbGF0aW9uIGluc3RydWN0aW9ucyBmb3IgU1BNMTIgY2FuIGJlIGZvdW5kIFtoZXJlXShodHRwczovL21hcmttaWtrZWxzZW4uZ2l0aHViLmlvL0dhbm5ldC1kb2NzL2luZGV4Lmh0bWwjaW5zdGFsbGF0aW9uKS4KClJ1biBzZWdtZW50YXRpb24gdXNpbmcgdGhlIGZvbGxvd2luZyBjb21tYW5kOgoKYGBge29jdGF2ZSwgZXZhbCA9IEZBTFNFfQpNUlNfc3RydWN0ID0gR2FubmV0U2VnbWVudChNUlNfc3RydWN0KTsKYGBgCgojIyMgUXVhbnRpZmljYXRpb24KCkZvbGxvd2luZyB0aXNzdWUgc2VnbWVudGF0aW9uLCBhbmQgYXNzdW1pbmcgYSB3YXRlciByZWZlcmVuY2Ugd2FzIGlucHV0dGVkIGF0IGRhdGEgbG9hZGluZywgcHNldWRvLWFic29sdXRlIHF1YW50aWZpY2F0aW9uIGNhbiBiZSBwZXJmb3JtZWQgdXNpbmcgdGhlIGZvbGxvd2luZyBjb21tYW5kOgoKYGBge29jdGF2ZSwgZXZhbCA9IEZBTFNFfQpNUlNfc3RydWN0ID0gR2FubmV0UXVhbnRpZnkoTVJTX3N0cnVjdCk7CmBgYAoKIyMgQ29tcGF0aWJpbGl0eSB3aXRoIEJJRFMKClVzZXJzIGFyZSBlbmNvdXJhZ2VkIHRvIG9yZ2FuaXplIHRoZWlyIE1SUyBkYXRhIGFuZCBtZXRhZGF0YSBhY2NvcmRpbmcgdG8gdGhlIEJyYWluIEltYWdpbmcgRGF0YSBTdHJ1Y3R1cmUgKEJJRFMpIFtAR29yZ29sZXdza2kyMDE2OyBAQm91Y2hhcmQyMDI1XS4gRnVsbCBkZXRhaWxzIGFib3V0IHRoZSBzdGFuZGFyZCBjYW4gYmUgZm91bmQgb24gdGhlIDxhIGhyZWY9Imh0dHBzOi8vYmlkcy1zcGVjaWZpY2F0aW9uLnJlYWR0aGVkb2NzLmlvL2VuL3N0YWJsZS8iIHRhcmdldD0iX2JsYW5rIj5CSURTIHdlYnNpdGU8L2E+LiBNUlMgc3BlY2lmaWNhdGlvbnMgY2FuIGJlIGZvdW5kIDxhIGhyZWY9Imh0dHBzOi8vYmlkcy1zcGVjaWZpY2F0aW9uLnJlYWR0aGVkb2NzLmlvL2VuL3N0YWJsZS9tb2RhbGl0eS1zcGVjaWZpYy1maWxlcy9tYWduZXRpYy1yZXNvbmFuY2Utc3BlY3Ryb3Njb3B5Lmh0bWwiIHRhcmdldD0iX2JsYW5rIj5oZXJlPC9hPi4KCjo6OiBpbmZvCjxpIGNsYXNzPSJmYSBmYS1pbmZvLWNpcmNsZSIgc3R5bGU9ImNvbG9yOiB3aGl0ZSI+PC9pPiBXaGlsZSBHYW5uZXQgd2lsbCBhdXRvbWF0aWNhbGx5IGNoZWNrIGlmIHVzZXJzJyBCSURTIGRhdGFzZXRzIGFyZSB2YWxpZCwgdXNlcnMgbWF5IGFsc28gd2lzaCB0byB2YWxpZGF0ZSB0aGVpciBkYXRhc2V0cyB1c2luZyB0aGUgPGEgaHJlZj0iaHR0cHM6Ly9iaWRzLXZhbGlkYXRvci5yZWFkdGhlZG9jcy5pby9lbi9zdGFibGUvIiB0YXJnZXQ9Il9ibGFuayI+PHU+QklEUyBWYWxpZGF0b3I8L3U+PC9hPiwgd2hpY2ggd2lsbCBwZXJmb3JtIGEgbW9yZSB0aG9yb3VnaCB2YWxpZGF0aW9uIGNoZWNrLgo6OjoKCiMjIyBMb2FkaW5nIGRhdGEKClRoZSBjb21tYW5kIHN5bnRheCBmb3IgbG9hZGluZyBhIEJJRFMgZGF0YXNldCBpcyBzbGlnaHRseSBkaWZmZXJlbnQuIFRoZSBiYXNlIGRpcmVjdG9yeSBwYXRoIG5hbWUgb2YgYSBCSURTIGRhdGFzZXQgaXMgZW50ZXJlZCBpbnRvIGBHYW5uZXRMb2FkLm1gIGFzIGEgY2VsbCBhcnJheSBhcyB0aGUgZmlyc3QgaW5wdXQgYXJndW1lbnQuIFRoZSBzZWNvbmQgaW5wdXQgYXJndW1lbnQgaXMgYSBjZWxsIGFycmF5IHRoYXQgc3BlY2lmaWVzIHdoaWNoIE1SUyBkYXRhIHRvIHByb2Nlc3MuIFRoaXMgaXMgdGhlIGxhYmVsIHVzZWQgd2l0aCB0aGUgYGFjcWAgZW50aXR5IGluIHRoZSBmaWxlbmFtZXMgb2YgdGhlIHNpbmdsZS12b3hlbCBNUlMgZGF0YSBmaWxlcyAodGhvc2UgZW5kaW5nIGluIGAqX3N2cy5uaWlbLmd6XWApIHRvIGJlIHByb2Nlc3NlZC4gSWYgdGhlIHNlY29uZCBpbnB1dCBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQsIEdhbm5ldCB3aWxsIHByb2Nlc3MgYWxsIHNpbmdsZS12b3hlbCBNUlMgZGF0YSBmaWxlcyBpbiB0aGUgZGF0YXNldC4KClVuc3VwcHJlc3NlZCB3YXRlciByZWZlcmVuY2UgZmlsZXMgYXJlIGF1dG9tYXRpY2FsbHkgZm91bmQgYnkgcGFyc2luZyB0aGUgcmVsZXZhbnQgYCpfc3ZzLmpzb25gIGZpbGVzIGZvciB0aGUgYFJlZmVyZW5jZVNpZ25hbGAga2V5LgoKYEdhbm5ldENvUmVnaXN0ZXIubWAgZG9lcyBub3QgcmVxdWlyZSBhIHNlY29uZCBpbnB1dCBhcmd1bWVudCBmb3Igc3RydWN0dXJhbCBpbWFnZSBmaWxlbmFtZXMgYXMgR2FubmV0IHdpbGwgc2VhcmNoIGZvciB0aGUgcGF0aCBuYW1lcyBvZiB0aGUgaW1hZ2VzIGFzc29jaWF0ZWQgd2l0aCBlYWNoIE1SUyBhY3F1aXNpdGlvbiBzdG9yZWQgaW4gdGhlIGBBbmF0b21pY2FsSW1hZ2VgIGtleSBpbiB0aGUgYCpfc3ZzLmpzb25gIGZpbGVzLgoKVGhpcyBzaG93cyB0aGF0IGl0IGlzIGNydWNpYWwgdGhhdCB1c2VycyBhZGhlcmUgdG8gdGhlIEJJRFMgc3BlY2lmaWNhdGlvbnMgdG8gYXZvaWQgcnVubmluZyBpbnRvIGVycm9ycy4KCkV4YW1wbGUgdXNhZ2U6CgpgYGB7b2N0YXZlLCBldmFsID0gRkFMU0V9Ck1SU19zdHJ1Y3QgPSBHYW5uZXRMb2FkKHsncGF0aC90by9iaWRzX2RhdGFzZXQvJ30sIHsnbWVnYXByZXNzJ30pOyAlICdtZWdhcHJlc3MnIHdvdWxkIGJlIHRoZSAnYWNxJyBlbnRpdHkgbGFiZWwgZm9yIHRoZSBNRUdBLVBSRVNTIGZpbGVzIGluICdwYXRoL3RvL2JpZHNfZGF0YXNldC8nCk1SU19zdHJ1Y3QgPSBHYW5uZXRGaXQoTVJTX3N0cnVjdCk7Ck1SU19zdHJ1Y3QgPSBHYW5uZXRDb1JlZ2lzdGVyKE1SU19zdHJ1Y3QpOyAlIE5vIHNlY29uZCBpbnB1dCBhcmd1bWVudCBpcyBuZWVkZWQgYXMgR2FubmV0IHdpbGwgZmluZCB0aGUgYXNzb2NpYXRlZCBzdHJ1Y3R1cmFsIGltYWdlcyBmcm9tIHRoZSAqX3N2cy5qc29uIGZpbGVzCk1SU19zdHJ1Y3QgPSBHYW5uZXRTZWdtZW50KE1SU19zdHJ1Y3QpOwpNUlNfc3RydWN0ID0gR2FubmV0UXVhbnRpZnkoTVJTX3N0cnVjdCk7CmBgYAoKQXMgc2hvd24sIG9ubHkgdGhlIHBhdGggbmFtZSBvZiB0aGUgQklEUyBkYXRhc2V0IGJhc2UgZGlyZWN0b3J5IGlzIGlucHV0dGVkIGludG8gYEdhbm5ldExvYWQubWAuIEdhbm5ldCB3aWxsIHRoZW4gYXV0b21hdGljYWxseSBwYXJzZSB0aGUgc3ViamVjdCAoYW5kIHNlc3Npb24pIHN1YmRpcmVjdG9yaWVzIHRvIGZpbmQgYWxsIHJlbGV2YW50IHNpbmdsZS12b3hlbCBNUlMgZGF0YSBmaWxlcywgaW5jbHVkaW5nIHdhdGVyIHNpZ25hbCByZWZlcmVuY2VzIGFuZCBzdHJ1Y3R1cmFsIE1SIGltYWdlcy4KCiMjIEJhdGNoIHByb2Nlc3NpbmcKCk9uZSBvZiB0aGUgbWFqb3Igc3RyZW5ndGhzIG9mIEdhbm5ldCBpcyBpdHMgYWJpbGl0eSB0byBwcm9jZXNzIGRhdGFzZXRzIGluIGJhdGNoZXMgdXNpbmcgdGhlIHNhbWUgcGlwZWxpbmUuIFRvIGxvYWQgYW5kIGZpdCBtdWx0aXBsZSBmaWxlcywgc2ltcGx5IGFkZCBtb3JlIGZpbGVuYW1lcyB0byB0aGUgcmVzcGVjdGl2ZSBjZWxsIGFycmF5cyB0aGF0IGFyZSBwYXNzZWQgdG8gYEdhbm5ldExvYWQubWAsIGFzIHNob3duIGJlbG93IGZvciBQaGlsaXBzIGRhdGE6CgpgYGB7b2N0YXZlLCBldmFsID0gRkFMU0V9Ck1SU19zdHJ1Y3QgPSBHYW5uZXRMb2FkKHsnc3ViLTAxX2FjdC5zZGF0JywgJ3N1Yi0wMl9hY3Quc2RhdCcsICdzdWItMDNfYWN0LnNkYXQnfSwgLi4uCiAgICAgICAgICAgICAgICAgICAgICAgIHsnc3ViLTAxX3JlZi5zZGF0JywgJ3N1Yi0wMl9yZWYuc2RhdCcsICdzdWItMDNfcmVmLnNkYXQnfSk7Ck1SU19zdHJ1Y3QgPSBHYW5uZXRGaXQoTVJTX3N0cnVjdCk7CiUgT25seSBpZiBzdHJ1Y3R1cmFsIE1SIGltYWdlcyBhcmUgYXZhaWxhYmxlIGNhbiB0aGUgbmV4dCBsaW5lcyBjYW4gYmUgcnVuCiUgTm90ZSB0aGF0IHRoZSBudW1iZXIgb2Ygc3RydWN0dXJhbCBpbWFnZXMgbXVzdCBtYXRjaCB0aGUgbnVtYmVyIG9mIE1SUyBtZXRhYm9saXRlIGRhdGEgZmlsZXMgaW5wdXR0ZWQgaW4gR2FubmV0TG9hZApNUlNfc3RydWN0ID0gR2FubmV0Q29SZWdpc3RlcihNUlNfc3RydWN0LCB7J1Qxdy5uaWknLCAnVDF3Lm5paScsICdUMXcubmlpJ30pOwpNUlNfc3RydWN0ID0gR2FubmV0U2VnbWVudChNUlNfc3RydWN0KTsKTVJTX3N0cnVjdCA9IEdhbm5ldFF1YW50aWZ5KE1SU19zdHJ1Y3QpOwpgYGAKClRoZSByZXNwZWN0aXZlIHdhdGVyIHJlZmVyZW5jZSBmaWxlcyBgc3ViLTAxX3JlZi5zZGF0YCwgYHN1Yi0wMl9yZWYuc2RhdGAsIGV0Yy4gbmVlZCB0byBiZSBsaXN0ZWQgaW4gdGhlIHNhbWUgb3JkZXIgYXMgdGhlIHdhdGVyLXN1cHByZXNzZWQgZmlsZXMgYHN1Yi0wMV9hY3Quc2RhdGAsIGBzdWItMDFfYWN0LnNkYXRgLCBldGMuIElmIHlvdSBpbnRlbmQgdG8gcHJvY2VzcyBhIGxhcmdlIG51bWJlciBvZiBkYXRhc2V0cywgd2UgcmVjb21tZW5kIHdyaXRpbmcgYSBzY3JpcHQgYXMgYSBjbGVhciB3YXkgb2YgZGVmaW5pbmcgdGhlIGlucHV0IGNlbGwgYXJyYXlzLgoKV2UgaGF2ZSBwcm92aWRlZCBhbiBbZXhhbXBsZSBiYXRjaCBwcm9jZXNzaW5nIHNjcmlwdF0oaHR0cHM6Ly9tYXJrbWlra2Vsc2VuLmdpdGh1Yi5pby9HYW5uZXQtZG9jcy9iYXRjaC1zY3JpcHQuaHRtbCkgdGhhdCB5b3UgbWF5IG1vZGlmeSBmb3IgeW91ciBvd24gcHVycG9zZXMuCgojIyBKb2luaW5nIGRhdGEgZmlsZXMKCkluIHNvbWUgaW5zdGFuY2VzIHVzZXJzIG1heSB3YW50IHRvIGNvbmpvaW4gY29uc2VjdXRpdmVseSBhY3F1aXJlZCBkYXRhIGZpbGVzLCBzdWNoIHRoYXQgdGhleSBhcmUgcHJvY2Vzc2VkIGFzIGlmIHRoZXkgd2VyZSBvbmUgc2luZ2xlIGRhdGFzZXQuIEdhbm5ldCBpcyBhYmxlIHRvIGRvIHRoaXMuIFRvIGVuYWJsZSB0aGlzIGZ1bmN0aW9uYWxpdHksIHRoZSBgam9pbmAgZmxhZyBpbiBgR2FubmV0UHJlSW5pdGlhbGlzZS5tYCBtdXN0IGJlIHNldCB0byBgMWAuCgpIb3dldmVyLCB0aGVyZSBpcyBhIGRpZmZlcmVudCBjb21tYW5kIHN5bnRheCB3aGVuIGJhdGNoLXByb2Nlc3NpbmcgYWNyb3NzIG11bHRpcGxlIHN1YmplY3RzJyBkYXRhc2V0cyBJbiBzdWNoIGNhc2VzLCByYXRoZXIgdGhhbiBlbnRlcmluZyBmaWxlcyBhcyB2ZWN0b3JzLCB0aGUgaW5wdXQgY2VsbCBhcnJheXMgbXVzdCBiZSBNICRcdGltZXMkIE4gbWF0cmljZXMsIHdoZXJlIE0gaXMgdGhlIG51bWJlciBvZiBmaWxlcyBwZXIgc3ViamVjdCB0byBiZSBjb25qb2luZWQgYW5kIE4gaXMgdGhlIG51bWJlciBvZiBzdWJqZWN0cy4KCldlIGhhdmUgcHJvdmlkZWQgYW4gW2V4YW1wbGUgc2NyaXB0XShodHRwczovL21hcmttaWtrZWxzZW4uZ2l0aHViLmlvL0dhbm5ldC1kb2NzL2pvaW5pbmctZGF0YS1maWxlcy5odG1sKSBmb3Igam9pbmluZyBmaWxlcy4KCiMjIE91dHB1dAoKQXMgc2hvd24gaW4gdGhlIHN5bnRheCBhYm92ZSwgR2FubmV0IHNhdmVzIGFsbCByZWxldmFudCBkYXRhIGFuZCByZXN1bHRzIGluIGEgc3RydWN0dXJlIChlLmcuLCBgTVJTX3N0cnVjdGApIGF0IGFsbCBzdGVwcyBpbiB0aGUgYW5hbHlzaXMgcGlwZWxpbmUuIEFmdGVyIGNyZWF0aW5nIHRoZSBpbml0aWFsIG91dHB1dCBmcm9tIGBHYW5uZXRMb2FkLm1gLCBgTVJTX3N0cnVjdGAgaXMgdXNlZCBhcyBib3RoIHRoZSBvdXRwdXQgYW5kIGlucHV0IGFyZ3VtZW50cyBmb3IgdGhlIG90aGVyIEdhbm5ldCBtb2R1bGVzLiAoWW91IG5lZWQgbm90IHVzZSBgTVJTX3N0cnVjdGA7IHlvdSBjYW4gdXNlIHNvbWV0aGluZyBtb3JlIGRlc2NyaXB0aXZlIGFuZCByZWxldmFudCB0byB5b3VyIHB1cnBvc2VzIGlmIHlvdSB3aXNoLikKClRoZSBvdXRwdXQgc3RydWN0dXJlIGNvbnRhaW5zIHNldmVyYWwgZmllbGRzIGFuZCBzdWJmaWVsZHMsIHdoaWNoIGdyb3cgaW4gbnVtYmVyIGFzIHlvdXIgcHJvY2VlZCB0aHJvdWdoIHRoZSBHYW5uZXQgYW5hbHlzaXMgcGlwZWxpbmUuIFNlZSB0aGUgbGlzdCBvZiBbb3V0cHV0IHN0cnVjdHVyZSBhdHRyaWJ1dGVzXShodHRwczovL21hcmttaWtrZWxzZW4uZ2l0aHViLmlvL0dhbm5ldC1kb2NzL291dHB1dC1zdHJ1Y3R1cmUtYXR0cmlidXRlcy5odG1sKSBmb3IgYSBjb21wbGV0ZSBkZXNjcmlwdGlvbi4KCllvdSBjYW4gYWxzbyBvdXRwdXQgYSBDU1YgZmlsZSBjb250YWluaW5nIHVzZWZ1bCB2YWx1ZXMgZnJvbSB0aGUgb3V0cHV0IHN0cnVjdHVyZSBmb3IgZnVydGhlciBhbmFseXNpcyBpbiBhIHN0YXRpc3RpY2FsIHByb2dyYW0gb2YgeW91ciBjaG9pY2UuIFRoaXMgZnVuY3Rpb25hbGl0eSBpcyBzZXQgaW4gYEdhbm5ldFByZUluaXRpYWxpc2UubWAuCgojIyMgUmVmZXJlbmNlcwo=</div>
<!DOCTYPE html>
<br>
<hr>
<p style="text-align: right;">Built with <a href="https://rmarkdown.rstudio.com/" target="_blank">R Markdown</a> in <a
    href="https://posit.co/products/open-source/rstudio/" target="_blank">RStudio</a>
  <br>
</p>
<p style="text-align: right;">Copyright &copy; 2020&ndash;2025, Mark Mikkelsen <a
    href="https://creativecommons.org/licenses/by/4.0" target="_blank"><img id="cc"
      style="height:22px!important;margin-left: 3px;vertical-align:text-bottom;" src="images/license/cc-xlarge.png"><img
      id="cc" style="height:22px!important;margin-left: 3px;vertical-align:text-bottom;"
      src="images/license/by-xlarge.png"></a>
</p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("getting-started.Rmd");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
